# **TXHook - QQ协议抓包分析工具**
 
> **📌 项目状态**  
> 由原作者 [fuqiuluo](https://github.com/fuqiuluo)  开发并开源，现由 [owo233](https://github.com/callng)  维护优化，修复BUG并增强功能。
 
---

**我们始终推荐在Actions下载最新构建版本，Releases可能更新不及时。[点我前往Actions](https://github.com/callng/QQHook/actions/workflows/build_ci.yml)**

## 😄 状态

**⚠️~~注意，从9.1.90(versionCode>=10248)及以上的版本开始将无法获取到完整的数据包内容~~**

~~目前会出现所谓的"Appid is invalid!"，导致无法正常登录和收发消息。~~

- 已经修复，现在可以继续获取数据包了（完整包需要配合TXHook Server）
- 至少需要升级模块版本到3.2.2，才能在9.1.90版本及以上正常使用。

#### 新的发现

2025-08-06:

* 在9.2.5版本QQ开始云下发新版本登录协议，之前(wtlogin.login),现在(trpc.login.ecdh.EcdhService.SsoNTLoginPasswordLogin).
* 这会导致TXHook不再能hook到TLV数据，新登录包也完全不再依赖外部的TEA加密算法，现在它~~可能~~已经进入了FEKit内部进行加密.
* PCNTQQ一开始就是这种cmd，移动端同步只是早晚的事情，只不过是姗姗来迟.
* 查看新的登录包，发现包长度至少缩短了一半，已经抛弃TLV.
* 目前TXHook没有什么好解决方法，无法查看加密数据.
* 不过好在目前可以通过清除QQ的全部数据还原到之前的cmd(这可能不是唯一的方法,但是是最快的方法).

2025-08-07:

* 在3.2.3版本，模块添加了一个Hook，使其将NT登录流程强制降级到WT登录流程，这个方法或许会在QQ之后的某次更新失效.
---

## ⚠️ 警告

**在不需要抓包的时候，不要启用本模块，这可能会导致宿主性能下降。**

**在不运行模块本体的情况获取不到任何数据！！！**

也就是说，必须启动模块APP后才能正常使用。

在模块设置页面配置服务地址后才能和 TXHook Server 通讯。

---

## **🔧 核心功能**  
基于Xposed框架的QQ协议抓包模块，支持：  
- 获取TCP数据包
- 获取TEA加解密数据
- 获取TLV数据
- 获取ECDH密钥数据
- 获取部分MD5加密数据
- 获取完整的数据包(需配合PC版本的TXHook Server)
- 分析协议结构(需配合PC版本的TXHook Server)
- 其他功能(...)
- **理论兼容全平台QQ版本**（包括但不限于）：  
  - 标准版QQ  
  - TIM
  - QQ手表版

---
 
## **🚀 使用说明**  
1. **环境依赖**  
   - LSPosed
   - 建议Android 8.1+系统

> **⚠️ 注意**  
> 本工具仅供学习研究，使用需遵守当地法律法规。
> 部分功能可能需要手动适配新版本QQ。
 
--- 
